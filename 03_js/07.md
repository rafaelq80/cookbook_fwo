<h1>Projeto 01 - Portf√≥lio - Atualizar a Se√ß√£o About Dinamicamente com JavaScript</h1>



Agora que j√° temos as nossas p√°ginas HTML criadas e estilizadas com CSS, e j√° estudamos os conceitos b√°sicos da Linguagem JavaScript com foco em p√°ginas WEB, chegou a hora de utilizarmos o JavaScript para criar interatividade e adicionar a√ß√µes nas nossas p√°ginas!

Atrav√©s da Linguagem JavaScript, vamos atualizar os dados do Github, exibidos na Se√ß√£o About da p√°gina index. Na pr√°tica, faremos uma Requisi√ß√£o HTTP na API do Github e preencheremos os elementos da se√ß√£o about (foto, link e o numero de reposit√≥rio e seguidores do Github), de forma din√¢mica, com os dados recebidos no Corpo da Resposta HTTP da Requisi√ß√£o enviada para a API do Github, mantendo as informa√ß√µes sempre atualizadas.

<br />

<h2>1. Fetch API</h2>



A **Fetch API** do JavaScript √© uma interface moderna, que permite fazer Requisi√ß√µes HTTP ass√≠ncronas em API's, hospedadas em servidores, a partir de Navegadores WEB. Ela simplifica as opera√ß√µes ass√≠ncronas utilizando **Promises**, que oferecem muita flexibilidade, al√©m de diversas op√ß√µes de personaliza√ß√£o.

> **Fun√ß√µes Ass√≠ncronas** s√£o fun√ß√µes que podem ser executadas em segundo plano, enquanto o restante do c√≥digo continua sua execu√ß√£o. Essas fun√ß√µes s√£o especialmente √∫teis para opera√ß√µes que podem levar algum tempo para serem conclu√≠das, como Requisi√ß√µes HTTP para API's ou acesso √† Bancos de dados.
>
> **Promise:** √â um objeto JavaScript utilizado para o **Processamento Ass√≠ncrono**. Na pr√°tica, uma Promise √© uma promessa, que representa um valor que pode estar dispon√≠vel agora, no futuro ou nunca (erro). 
>
> Uma **Promise** √© como um "procurador" para um valor que n√£o √© necessariamente conhecido quando a promessa √© criada. Isso permite a associa√ß√£o de m√©todos de tratamento para eventos da a√ß√£o ass√≠ncrona num caso eventual de sucesso ou de falha. Isto permite que os m√©todos ass√≠ncronos retornem valores como m√©todos s√≠ncronos: ao inv√©s do valor final, o m√©todo ass√≠ncrono retorna uma promessa de que receber√° o valor em algum momento no futuro.
>
> Observe na imagem abaixo, que uma **Promise** possui tr√™s estados:
>
> <div align="center"><img src="https://i.imgur.com/CoxH7Yw.png" title="source: imgur.com" /><figcaption><i>Estados de uma Promise</i></figcaption></div>
>
>   - **pending** (pendente): Estado inicial, que n√£o foi nem resolvida e nem rejeitada.
> - **fulfilled** (resolvida): sucesso na opera√ß√£o.
> - **rejected** (rejeitado):  falha na opera√ß√£o.
>
> Abaixo, vemos como criar uma Promise
>
>   **Sintaxe:**
>
>   ```ts
>   new Promise( ( resolve, reject ) => { } )
>   ```
>
>   - **resolve**: fun√ß√£o, geralmente uma **Arrow Function**, que ser√° utilizada para retornar o resultado da Promise.
>   - **reject**: fun√ß√£o, geralmente uma **Arrow Function**, que ser√° utilizada para para retornar o erro da Promise.
>
> <br>
>
> <div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="30px"/> <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank"><b>Documenta√ß√£o: Fun√ß√µes Ass√≠ncronas</b></a></div>
>
> <div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="30px"/> <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank"><b>Documenta√ß√£o: Promise</b></a></div>
>
> <br>

O m√©todo `fetch()` √© usado para enviar uma Requisi√ß√£o a uma URL espec√≠fica. O m√©todo `fetch()` retorna uma **Promise**, que pode ser tratada atrav√©s das instru√ß√µes `then()` e `catch()`. 

**Sintaxe:**

```javascript
fetch(url)
  .then(response => {
    // A√ß√µes com a Resposta da Requisi√ß√£o
  })
  .catch(error => {
    // Tratamento do erro
  });
```

**onde:**

- **M√©todo fetch(url):** √© usada para **recuperar recursos** de um servidor de forma ass√≠ncrona, atrav√©s de uma Requisi√ß√£o HTTP do tipo GET. Ela retorna uma **Promise**, que se resolve em um objeto do tipo `Response`, que  encapsula a Resposta HTTP do servidor. O Par√¢metro `url` √© utilizado para indicar o endere√ßo do recurso, que voc√™ deseja buscar (https://blogpessoal.onrender.com/temas/1), composto pelo endere√ßo do servidor + o endere√ßo do recurso.
- **M√©todo then():** √© chamado quando a Requisi√ß√£o √© bem-sucedida, ou seja, a Resposta do servidor √© recebida. Voc√™ pode acessar a resposta e processar os dados dentro deste bloco.
- **M√©todo catch():** √© chamado quando ocorre um erro durante a Requisi√ß√£o, como por exemplo, falha na conex√£o ou uma Resposta HTTP com status de erro (500). Voc√™ pode tratar o erro e lidar com ele de acordo com as defini√ß√µes do projeto.

Para ler os dados recebidos no Corpo da Resposta, utilizaremos o m√©todo `json()`, que permite ler o Corpo da Resposta da Requisi√ß√£o e na sequ√™ncia, o retorna como um Objeto JavaScript, representado no formato JSON.

**Sintaxe:**

```js
resposta.json()
```

Ao converter a Resposta da Requisi√ß√£o para o formato JSON, receberemos algo semelhante ao exemplo abaixo:

```json
{
  "login": "conteudoGeneration",
  "avatar_url": "https://avatars.githubusercontent.com/u/62150036?v=4",
  "url": "https://api.github.com/users/conteudoGeneration",
  "html_url": "https://github.com/conteudoGeneration",
  "public_repos": 36,
  "followers": 555,
  "following": 2,
  "created_at": "2020-03-13T15:38:51Z",
  "updated_at": "2023-12-12T13:46:14Z"
}

```

Em nosso portf√≥lio, utilizaremos alguns destes atributos para dinamizar a Se√ß√£o About da nossa p√°gina index.

<br />

<div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="30px"/> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank"><b>Documenta√ß√£o: Fetch API</b></a></div>

<div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="30px"/> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/json" target="_blank"><b>Documenta√ß√£o: M√©todo json()</b></a></div>

<br />

Como o m√©todo **fetch()** retorna uma Promise, n√≥s podemos reescrever o m√©todo como uma fun√ß√£o ass√≠ncrona, utilizando a sintaxe **async/await**.

> As palavras-chave **async** e **await**, representam uma sintaxe, que foi criada com objetivo de simplificar a Programa√ß√£o  Ass√≠ncrona, facilitando o fluxo de escrita e leitura do c√≥digo. Em  outras palavras, torna poss√≠vel escrever um c√≥digo que funciona de forma ass√≠ncrona, por√©m lido e estruturado de forma s√≠ncrona. O **async/await** tamb√©m trabalha com o c√≥digo ass√≠ncrono baseado em **Promises**, por√©m ele "esconde" as Promises para que a leitura e a escrita do c√≥digo sejam mais limpas.
>
> Ao declarar uma fun√ß√£o com a palavra reservada **async**, n√≥s poderemos utilizar a palavra-chave **await** antes de qualquer fun√ß√£o que retorne uma Promise. Dessa forma, a  execu√ß√£o da fun√ß√£o externa (a fun√ß√£o **async**), ser√° pausada at√© que a Promise seja resolvida, sem pausar a aplica√ß√£o como um todo.
>
> A palavra-chave **await** recebe uma Promise e a transforma em um valor de retorno (ou lan√ßa uma exce√ß√£o em caso de erro). Quando utilizamos o **await**, o JavaScript vai aguardar at√© que a Promise seja finalizada. Se for finalizada com sucesso (o termo utilizado √© *fulfilled*), o valor obtido √© retornado. Se a Promise for rejeitada (o termo utilizado √© *rejected*), √© retornado o erro lan√ßado pela exce√ß√£o.
>
> **Sintaxe:**
>
> ```js
> async function nome_da_funcao(){
> 
> await funcao_retorna_promise();
> 
> }
> ```
>
> Observe que a fun√ß√£o foi declarada com a palavra chave **async**, indicando que ela ser√° do tipo ass√≠ncrona. No corpo da fun√ß√£o, utilizaremos a palavra chave **await** para indicar que uma fun√ß√£o, que retorna uma Promise ser√° executada. Importante refor√ßar que a palavra chave **await s√≥ pode ser utilizada em uma fun√ß√£o ass√≠ncrona**.
>
> Como o M√©todo fetch retorna uma Promise, podemos utilizar esta sintaxe para simplificar o nosso c√≥digo.
>
> <br>
>
> <div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="30px"/> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank"><b>Documenta√ß√£o: Fun√ß√µes Ass√≠ncronas - async</b></a></div>
>
> <div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="30px"/> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await" target="_blank"><b>Documenta√ß√£o: Fun√ß√µes Ass√≠ncronas - await</b></a></div>
>
> <br>

<br />

Veja no exemplo abaixo, como reescrever o m√©todo `fetch()`, atrav√©s da sintaxe **async/await**:

```javascript
async function consultar(){
    try{
        const resposta = await fetch('https://blogpessoal.onrender.com/temas/1');
        const respostaJson = resposta.json();
        console.log(respostaJson);
    }catch(error){
        console.error(error);
    }
}
```

Analisando o exemplo acima, observe que:

- A escrita da fun√ß√£o ass√≠ncrona consultar(), utilizando a sintaxe **async/await**, √© muito semelhante a escrita de uma fun√ß√£o s√≠ncrona. 
- Na assinatura da fun√ß√£o `consultar()` foi adicionada a palavra chave `async` e na chamada do m√©todo **fetch()**, que √© um m√©todo ass√≠ncrono, foi utilizada a palavra chave `await`. 
- Para capturar os eventuais erros, foi utilizada a estrutura de tratamento de exce√ß√µes `try...catch`. 
- Para ler os dados do Corpo da Resposta e converter em um Objeto no formato JSON, utilizamos o m√©todo `json()`.

Agora que j√° aprendemos a utilizar a Fetch API, vamos criar uma fun√ß√£o JavaScript para consumir os dados da API do Github e exibi-los na Se√ß√£o About da p√°gina index.

<br />

<h2>üë£ Passo 01 - Criar a pasta js</h2>



Antes de criar o nosso script JavaScript, vamos adicionar a pasta **js** dentro da pasta **assets**, onde armazenaremos os scripts JavaScript do nosso Website:

1. Na **Barra Explorer**, selecione a pasta **assets** e clique no bot√£o **New Folder** (Nova Pasta), indicado na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/jx2dWqp.png" title="source: imgur.com" /></div>

2. O nome da pasta ser√° **js**, como mostra a imagem abaixo. Ap√≥s digitar o nome da pasta, pressione a tecla **enter** do seu teclado para concluir.

<div align="center"><img src="https://i.imgur.com/85gV036.png" title="source: imgur.com" /></div>

Na sequ√™ncia, vamos criar o arquivo **script.js**:

<br />

<h2>üë£ Passo 02 - Criar o arquivo script.js</h2>



Vamos criar o arquivo **script.js**, dentro da nossa pasta **js**:

1. Na **Barra Explorer**, selecione a pasta **js** e clique no bot√£o **New File** (Novo Arquivo), indicado na imagem abaixo:  

<div align="center"><img src="https://i.imgur.com/CoTMWP0.png" title="source: imgur.com" /></div>

2. O nome do arquivo ser√° **script.js**, como mostra a figura abaixo. Ap√≥s digitar o nome do arquivo, pressione a tecla **enter** do seu teclado para concluir. 

<div align="center"><img src="https://i.imgur.com/kpbU0vA.png" title="source: imgur.com" /></div>

<br />

<h2>üë£ Passo 03 - Inserir o arquivo script.js na p√°gina index</h2>



1. Abra a p√°gina **index.html**
2. Depois da Se√ß√£o `<footer>`, insira o c√≥digo abaixo:

```html
<!-- Script JavaScript-->
<script src="assets/js/script.js"></script>
```

3. Veja na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/PgDcTyw.png" title="source: imgur.com" /></div>

<br />

> [!IMPORTANT]
>
> **O Script JavaScript deve ser inserido exatamente no local indicado na imagem acima, caso contr√°rio ele n√£o funcionar√°.**

<br />

<h2>üë£ Passo 04 - Criar a Fun√ß√£o getApiGithub()</h2>



1. No arquivo **script.js** adicione o c√≥digo abaixo:

```js
const sobre = document.querySelector("#about");

async function getApiGithub() {
  try {
    const dadosPerfil = await fetch(`https://api.github.com/users/conteudoGeneration`);
    const perfil = await dadosPerfil.json();

    let conteudo = `
          <img src="${perfil.avatar_url}"
          alt="Foto do Perfil do Github - ${perfil.name}">
  
          <article id="sobre-texto"> <!-- Adicione aqui as CLASSES -->
          <h1>Quem sou eu?</h1>
          <p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quibusdam odit voluptates incidunt
              inventore rem error harum blanditiis accusamus vitae, minus fugit consequatur? Dolorum maiores magni
              deleniti modi sit laudantium totam!
          </p>
  
          <div id="sobre_github" class="sobre_github flex"> <!-- Adicione aqui as CLASSES -->
              <a class="botao" target="_blank" href="${perfil.html_url}">Github</a>
              <!-- Adicione aqui as CLASSES -->
              <p>${perfil.followers} Seguidores</p>
              <p>${perfil.public_repos} Reposit√≥rios</p>
          </div>
  
          </article>
      `;

    sobre.innerHTML += conteudo;
  } catch (error) {
    console.log(error);
  }
}

getApiGithub();
```

Vamos analisar o c√≥digo:

<div align="center"><img src="https://i.imgur.com/TQ9vIzB.png" title="source: imgur.com" /></div>

**Linha 01:** Define uma constante chamada `sobre` que seleciona o elemento HTML cujo o ID √© igual a `"about"`. 

**Linhas 03 a 34:** Cria a fun√ß√£o `getApiGithub()`, definida como uma fun√ß√£o ass√≠ncrona, atrav√©s da palavra-chave `async`.

**Linhas 04 a 33:** Adiciona a estrutura `try...catch`, para capturar os eventuais erros de exce√ß√£o.

**Linhas 05:** Define uma constante chamada `dadosPerfil`, que receber√° a Resposta da Requisi√ß√£o HTTP, que ser√° enviada para a API do GitHub usando o m√©todo `fetch()`. Note que por se tratar de um m√©todo ass√≠ncrono, foi utilizada a palavra chave `await` na chamada do m√©todo `fetch()`. No par√¢metro URL foi passado o endere√ßo: `"https://api.github.com/users/conteudoGeneration"`, que consultar√° os dados do Github da Generation.

**Linha 06:** Define uma constante chamada `perfil`, que ir√° converter o Corpo da Resposta em um objeto no formato JSON.

**Linhas 08 a 28:** O c√≥digo dentro da vari√°vel `conteudo` cria elementos HTML dinamicamente com base nos dados do perfil do GitHub. Ele inclui a imagem do avatar do perfil (foto) e as informa√ß√µes sobre seguidores e reposit√≥rios. As vari√°veis `${perfil.avatar_url}`, `${perfil.name}`, `${perfil.html_url}`, `${perfil.followers}` e `${perfil.public_repos}` ser√£o substitu√≠das pelos valores reais do perfil, obtidas atrav√©s da Resposta da Requisi√ß√£o HTTP, enviada pela Fetch API.

**Linha 30:** Atrav√©s da instru√ß√£o `sobre.innerHTML += conteudo;` adicionaremos o conte√∫do HTML gerado na vari√°vel sobre, na p√°gina index, dentro do elemento cujo o ID seja igual a `"about"`, ou seja, dentro da Se√ß√£o About.

**Linhas 31 a 33:** O bloco `try`/`catch` captura os eventuais erros, durante o envio da Requisi√ß√£o HTTP ou durante a convers√£o Resposta da Requisi√ß√£o em um objeto JSON. Se houver algum erro, ele ser√° exibido no console.

**Linha 36:** Chamamos a fun√ß√£o `getApiGithub()`, para buscar os dados do perfil do GitHub e atualizar a p√°gina com as informa√ß√µes obtidas.

<br />

<h2>üë£ Passo 05 - Excluir o conte√∫do da Se√ß√£o About - P√°gina index</h2>



1. Abra a p√°gina **index.html**
2. Localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/ZcxS7Cr.png" title="source: imgur.com" /></div>

3. Substitua todo o trecho de c√≥digo acima, pelo trecho de c√≥digo abaixo:

```html
<!-- Se√ß√£o About -->
<section id="about" class="sobre_container">

</section>
```

A Se√ß√£o About ser√° preenchida pela fun√ß√£o **getApiGithub()**, que foi criada no arquivo **script.js**, logo n√£o precisamos mais fixar o conte√∫do desta se√ß√£o. 

Observe que o mesmo c√≥digo que acabamos de excluir, foi inserido na fun√ß√£o **getApiGithub()**, dentro do arquivo **script.js**, com uma pequena diferen√ßa: **a url da foto, a url do link do Github, o numero de reposit√≥rios p√∫blicos e o numero de seguidores do Github**, est√£o sendo preenchidos de forma din√¢mica, atrav√©s de vari√°veis JavaScript, recebidas no Corpo da Resposta da Requisi√ß√£o HTTP, enviada para a API do Github. Por isso que deixamos na p√°gina index apenas a marca√ß√£o da Se√ß√£o About (`<section>`), porque as demais informa√ß√µes ser√£o inseridas dinamicamente pelo JavaScript.

<br />

<h2>üë£ Passo 06 - Testar o Formul√°rio</h2>



1. Abra a p√°gina index.html no Navegador, atrav√©s do **Live Server** e clique no item **Sobre** do menu:

<div align="center"><img src="https://i.imgur.com/q6ZElkF.png" title="source: imgur.com" /></div>

2. Observe que a Se√ß√£o About foi criada de forma din√¢mica, pela fun√ß√£o JavaScript **getApiGithub()**, que busca informa√ß√µes na API do Github e insere na Se√ß√£o About, modificando a DOM original da p√°gina index.

<br />
<br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>

